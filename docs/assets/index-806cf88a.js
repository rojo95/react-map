import{r as c,R as x,l as y,L as R,i as S,j as s,a as T}from"./index-41234511.js";function Z(t,e){const n=c.useRef(e);c.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const $=1;function _(t){return Object.freeze({__version:$,map:t})}function N(t,e){return Object.freeze({...t,...e})}const p=c.createContext(null),j=p.Provider;function g(){const t=c.useContext(p);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function U(t){function e(n,o){const{instance:r,context:u}=t(n).current;return c.useImperativeHandle(o,()=>r),n.children==null?null:x.createElement(j,{value:u},n.children)}return c.forwardRef(e)}function I(t){function e(n,o){const{instance:r}=t(n).current;return c.useImperativeHandle(o,()=>r),null}return c.forwardRef(e)}function P(t){return function(n){const o=g(),r=t(n,o),{instance:u}=r.current,a=c.useRef(n.position),{position:i}=n;return c.useEffect(function(){return u.addTo(o.map),function(){u.remove()}},[o.map,u]),c.useEffect(function(){i!=null&&i!==a.current&&(u.setPosition(i),a.current=i)},[u,i]),r}}function V(t,e){const n=c.useRef();c.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function O(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function v(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function b(t,e){return e==null?function(o,r){const u=c.useRef();return u.current||(u.current=t(o,r)),u}:function(o,r){const u=c.useRef();u.current||(u.current=t(o,r));const a=c.useRef(o),{instance:i}=u.current;return c.useEffect(function(){a.current!==o&&(e(i,o,a.current),a.current=o)},[i,o,r]),u}}function B(t,e){c.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var u;(u=e.layerContainer)==null||u.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function h(t){return function(n){const o=g(),r=t(O(n,o),o);return Z(o.map,n.attribution),V(r.current,n.eventHandlers),B(r.current,o),r}}function G(t){function e(r,u){return v(t(r),u)}const n=b(e),o=P(n);return I(o)}function W(t,e){const n=b(t,e),o=h(n);return U(o)}function X(t,e){const n=b(t,e),o=h(n);return I(o)}function q(t,e,n){const{opacity:o,zIndex:r}=e;o!=null&&o!==n.opacity&&t.setOpacity(o),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function D(){return g().map}function F(t){const e=D();return c.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function E(){return E=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},E.apply(this,arguments)}function J({bounds:t,boundsOptions:e,center:n,children:o,className:r,id:u,placeholder:a,style:i,whenReady:d,zoom:l,...m},L){const[z]=c.useState({className:r,id:u,style:i}),[f,H]=c.useState(null);c.useImperativeHandle(L,()=>(f==null?void 0:f.map)??null,[f]);const k=c.useCallback(M=>{if(M!==null&&f===null){const C=new y.Map(M,m);n!=null&&l!=null?C.setView(n,l):t!=null&&C.fitBounds(t,e),d!=null&&C.whenReady(d),H(_(C))}},[]);c.useEffect(()=>()=>{f==null||f.map.remove()},[f]);const A=f?x.createElement(j,{value:f},o):a??null;return x.createElement("div",E({},z,{ref:k}),A)}const K=c.forwardRef(J),w=W(function({position:e,...n},o){const r=new y.Marker(e,n);return v(r,N(o,{overlayContainer:r}))},function(e,n,o){n.position!==o.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==o.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==o.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==o.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==o.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),Q=X(function({url:e,...n},o){const r=new y.TileLayer(e,O(n,o));return v(r,o)},function(e,n,o){q(e,n,o);const{url:r}=n;r!=null&&r!==o.url&&e.setUrl(r)}),Y=G(function(e){return new y.Control.Zoom(e)});const nn=R.icon({iconUrl:S,iconSize:[30,30],iconAnchor:[15,30],popupAnchor:[0,-30]});function en({id:t,position:e,draggable:n,onClick:o}){return s.jsx(w,{position:e,draggable:n,icon:nn,eventHandlers:{click:()=>{o(t)}}})}const tn=R.icon({iconUrl:T,iconSize:[30,30],iconAnchor:[15,30],popupAnchor:[0,-30]});function on({position:t}){return s.jsx(w,{position:t,icon:tn,onClick:()=>console.log("borrar"),draggable:!0})}function cn({center:t,mapRef:e,maps:n,myPosition:o,mapActive:r}){function u(){return F({click:l=>{const m=l.latlng,L={id:Math.random(),position:m};i([...a,L])}}),null}const[a,i]=c.useState([]),d=l=>{i(a.filter(m=>m.id!==l))};return c.useState(()=>{},[]),s.jsxs(K,{center:[t.lat,t.lon],zoom:5,ref:e,scrollWheelZoom:!0,zoomControl:!1,eventHandlers:{click:()=>{}},children:[s.jsx(Q,{attribution:'Â© <a href="https://rojo95/github.io/portfolio">Portafolio</a>',url:n[r].url,minZoom:3}),o&&s.jsx(on,{position:o}),s.jsx(u,{}),a.map(l=>s.jsx(en,{id:l.id,position:l.position,draggable:!0,onClick:d},l.id)),s.jsx(Y,{position:"topleft"})]})}export{cn as default};
